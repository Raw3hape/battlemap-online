<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BattleMap Online - –†–∞—Å–∫—Ä–æ–π –∫–∞—Ä—Ç—É –º–∏—Ä–∞</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üó∫Ô∏è</text></svg>">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- –ù–∞—à–∏ —Å—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="/public/css/main.css">
</head>
<body>
    <!-- –ö–∞—Ä—Ç–∞ –∏ –∫–∞–Ω–≤–∞—Å—ã -->
    <div id="map"></div>
    <canvas id="fogCanvas"></canvas>
    <canvas id="gridCanvas"></canvas>
    
    <!-- –°–µ–ª–µ–∫—Ç–æ—Ä —Å—Ç–∏–ª—è –∫–∞—Ä—Ç—ã -->
    <div class="map-style-selector">
        <select id="mapStyle">
            <option value="dark">CartoDB Dark Matter (—Ç—ë–º–Ω–∞—è)</option>
            <option value="light">CartoDB Positron (—Å–≤–µ—Ç–ª–∞—è)</option>
            <option value="osm">OpenStreetMap</option>
            <option value="satellite">ESRI World Imagery (—Å–ø—É—Ç–Ω–∏–∫)</option>
            <option value="watercolor">Stamen Watercolor</option>
            <option value="toner">Stamen Toner</option>
            <option value="terrain">Stamen Terrain</option>
        </select>
    </div>
    
    <!-- UI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="ui-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="header">
            <h1>BattleMap Online</h1>
            <p class="subtitle">–†–∞—Å–∫—Ä–æ–π —Ä–µ–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É –º–∏—Ä–∞ –≤–º–µ—Å—Ç–µ!</p>
            <p style="font-size: 11px; opacity: 0.5; margin-top: 8px;">
                –õ–ö–ú - —Ä–∞—Å–∫—Ä—ã—Ç—å | Shift+–õ–ö–ú –∏–ª–∏ –ü–ö–ú - –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å | –ö–æ–ª–µ—Å–æ - –∑—É–º
            </p>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats">
            <div class="stat-item">
                <span class="stat-label">–†–∞—Å–∫—Ä—ã—Ç–æ –∫–º¬≤</span>
                <span class="stat-value" id="areaExplored">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">–ö–ª–µ—Ç–æ–∫</span>
                <span class="stat-value" id="cellsRevealed">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">–†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏</span>
                <span class="stat-value" id="cellSize">10 –∫–º</span>
            </div>
        </div>
        
        <!-- –û–Ω–ª–∞–π–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="online-stats">
            <div class="online-stat-item">
                <span class="online-stat-label">–í—Å–µ–≥–æ –∫–ª–µ—Ç–æ–∫</span>
                <span class="online-stat-value" id="totalCells">0</span>
            </div>
            <div class="online-stat-item">
                <span class="online-stat-label">–ò–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</span>
                <span class="online-stat-value" id="onlinePlayers">1</span>
            </div>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="controls">
            <button class="control-btn" id="zoomIn" title="–ü—Ä–∏–±–ª–∏–∑–∏—Ç—å">+</button>
            <button class="control-btn" id="zoomOut" title="–û—Ç–¥–∞–ª–∏—Ç—å">‚àí</button>
            <button class="control-btn" id="resetView" title="–°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥">üè†</button>
        </div>
        
        <!-- –¢–æ–ø —Å—Ç—Ä–∞–Ω -->
        <div class="top-countries">
            <h3>üèÜ –¢–æ–ø —Å—Ç—Ä–∞–Ω</h3>
            <div id="countriesList"></div>
        </div>
        
        <!-- –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ -->
        <div class="sync-status" id="syncStatus"></div>
    </div>
    
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- –ú–æ–¥—É–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script type="module">
        // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        import('/src/client/js/app.js').then(() => {
            console.log('‚úÖ BattleMap Online loaded successfully');
        }).catch(error => {
            console.error('‚ùå Failed to load BattleMap Online:', error);
            // Fallback –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏ –º–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
            loadFallbackVersion();
        });
        
        // –†–µ–∑–µ—Ä–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å –º–æ–¥—É–ª—è–º–∏
        function loadFallbackVersion() {
            console.log('Loading fallback version...');
            const script = document.createElement('script');
            script.src = '/src/client/js/battlemap-bundle.js';
            document.body.appendChild(script);
        }
    </script>
</body>
</html>